<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vietnamese Sign Language Recognition - Real-time</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <!-- Header -->
    <div class="header">
        <h1 id="title">ğŸ¤Ÿ Vietnamese Sign Language Recognition</h1>
        <p class="subtitle">Real-Time Detection - True Real-Time Recognition!</p>
        <div class="instructions">
            <p>âœ‹ <strong>How it works:</strong></p>
            <ul>
                <li>ğŸ‘‰ Perform a gesture in front of the camera</li>
                <li>ğŸ” The app automatically recognizes your sign</li>
                <li>âœ… Keep performing - a NEW prediction appears when you make a NEW gesture</li>
                <li>ğŸ¯ The prediction stays on screen until you perform a different gesture</li>
            </ul>
            <p style="color: #ff6b6b; font-weight: bold;">âš ï¸ Key: No button click needed! The app detects motion and predicts automatically.</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Video Section -->
        <div class="video-section">
            <div id="container" class="video-container">
                <canvas id="canvasOutput" style="display:none;"></canvas>
                <video autoplay playsinline id="videoElement" class="video-stream"></video>
            </div>
            <div class="info-box">
                <p><strong>Status:</strong> <span id="status" class="status-connecting">ğŸ”Œ Connecting...</span></p>
                <p><strong>Frames Captured:</strong> <span id="frame-count">0</span> / <span id="num-frames">{{ num_frames }}</span></p>
                <p><strong>Confidence Threshold:</strong> <span id="threshold-display">0.30</span></p>
            </div>
        </div>

        <!-- Control & Display Section -->
        <div class="control-section">
            <!-- Prediction Display -->
            <div class="prediction-box">
                <div class="prediction-label" id="prediction-label">ğŸ” Waiting for gesture...</div>
                <div class="prediction-confidence" id="prediction-confidence">Confidence: --</div>
                <div class="all-predictions" id="all-predictions"></div>
            </div>

            <!-- Configuration Panel -->
            <div class="control-panel">
                <h3>âš™ï¸ Configuration</h3>
                
                <div class="control-item">
                    <label for="num-frames-input">Number of Frames:</label>
                    <input type="number" id="num-frames-input" min="5" max="100" value="{{ num_frames }}" step="5">
                    <button onclick="updateNumFrames()">Update</button>
                    <small>How many frames to capture before recognition (higher = more accurate but slower)</small>
                </div>

                <div class="control-item">
                    <label for="confidence-threshold-input">Confidence Threshold:</label>
                    <input type="number" id="confidence-threshold-input" min="0" max="1" value="0.30" step="0.05">
                    <button onclick="updateThreshold()">Update</button>
                    <small>Minimum confidence to show prediction (higher = only confident predictions)</small>
                </div>

                <div class="control-item">
                    <button id="reset-btn" onclick="resetPrediction()" class="btn-secondary">Reset Prediction</button>
                </div>
            </div>

            <!-- Prediction History -->
            <div class="history-box">
                <h3>ğŸ“œ Prediction History</h3>
                <div class="sentence-display" id="sentence-display">
                    <span class="placeholder">Predictions will appear here...</span>
                </div>
                <button onclick="clearHistory()" class="btn-secondary">Clear History</button>
            </div>
        </div>
    </div>

    <!-- Statistics -->
    <div class="stats-box">
        <h3>ğŸ“Š Statistics</h3>
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-label">Total Predictions:</span>
                <span class="stat-value" id="total-predictions">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Connection Status:</span>
                <span class="stat-value" id="connection-status">Disconnected</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Last Confidence:</span>
                <span class="stat-value" id="last-confidence">--</span>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>

</html>
